<?php defined('SYSPATH') or die('No direct script access.');

class Improve_performance_logs extends Migration
{
    public $schema = 'public';
    public $table = 'logs';

    public function up()
    {
        $this->rename_column($this->table, 'time_end', 'time_total', null);
        $this->rename_column($this->table, 'count', 'count_match', null);
        $this->add_column($this->table, 'time_index_client', ['double', 'null' => true]);
        $this->add_column($this->table, 'time_index_logpost', ['double', 'null' => true]);
        $this->add_column($this->table, 'time_db', ['double', 'null' => true]);
        $this->add_column($this->table, 'count_all', ['integer', 'null' => true]);
    }

    public function down()
    {
        $this->remove_column($this->table, 'count_all');
        $this->remove_column($this->table, 'time_db');
        $this->remove_column($this->table, 'time_index_logpost');
        $this->remove_column($this->table, 'time_index_client');
        $this->rename_column($this->table, 'time_total', 'time_end', null);
        $this->rename_column($this->table, 'count_match', 'count', null);
    }
}