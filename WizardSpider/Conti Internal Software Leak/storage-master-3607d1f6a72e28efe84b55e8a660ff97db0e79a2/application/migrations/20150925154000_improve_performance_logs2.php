<?php defined('SYSPATH') or die('No direct script access.');

class Improve_performance_logs2 extends Migration
{
    public $schema = 'public';
    public $table = 'logs';

    public function up()
    {
        $this->add_column($this->table, 'count_client_filter', ['integer', 'null' => true]);
        $this->add_column($this->table, 'time_client_filter', ['integer', 'null' => true]);
        $this->rename_column($this->table, 'time_index_client', 'time_find_clients', null);
        $this->rename_column($this->table, 'time_index_logpost', 'time_find_logposts', null);
        $this->rename_column($this->table, 'time_db', 'time_find_logposts_db', null);
        $this->rename_column($this->table, 'count_all', 'count_find_logposts', null);
        $this->rename_column($this->table, 'count_match', 'count_find_clients', null);
    }

    public function down()
    {
        $this->remove_column($this->table, 'time_client_filter');
        $this->remove_column($this->table, 'count_client_filter');
        $this->rename_column($this->table, 'count_find_clients', 'count_match', null);
        $this->rename_column($this->table, 'count_find_logposts', 'count_all', null);
        $this->rename_column($this->table, 'time_find_logposts_db', 'time_db', null);
        $this->rename_column($this->table, 'time_find_logposts', 'time_index_logpost', null);
        $this->rename_column($this->table, 'time_find_clients', 'time_index_client', null);
    }
}