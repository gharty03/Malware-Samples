<?php defined('SYSPATH') or die('No direct script access.');

class Logpost extends Migration{

    public $schema = 'public';
    public $table = 'logpost';

    // TODO: table modified, need edit mvc
    public function up(){
        $this->run_query(DB::expr(
            "CREATE TABLE logpost(
                id SERIAL,
                client_id INT REFERENCES clients(id),
                length INT,
                data TEXT,
                host TEXT,
                post TEXT,
                referrer TEXT,
                link TEXT,
                logkeys TEXT,
                datetime TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
            );
        "));

        $this->run_query(DB::expr(
            "CREATE INDEX ON logpost (id);
        "));
    }

    public function down(){
        $this->set_schema($this->schema);
        $this->drop_table($this->table);
    }
}