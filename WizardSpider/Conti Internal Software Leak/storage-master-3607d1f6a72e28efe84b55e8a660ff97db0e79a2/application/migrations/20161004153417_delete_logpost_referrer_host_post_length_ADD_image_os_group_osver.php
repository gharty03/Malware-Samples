<?php defined('SYSPATH') or die('No direct script access.');

class delete_logpost_referrer_host_post_length_ADD_image_os_group_osver extends Migration{
    public $schema = 'public';
    public $table = 'logpost';

    public function up(){
        $this->remove_column($this->table, 'referrer');
        $this->remove_column($this->table, 'host');
        $this->remove_column($this->table, 'post');
        $this->remove_column($this->table, 'length');

        $this->add_column($this->table, 'image', ['binary']);
        $this->add_column($this->table, 'os', ['character', 'length' => 15]);
        $this->add_column($this->table, 'os_ver', ['character', 'length' => 16]);
        $this->add_column($this->table, 'group', ['character', 'length' => 255]);
    }

    public function down(){
        $this->add_column($this->table, 'host', ['text']);
        $this->add_column($this->table, 'post', ['text']);
        $this->add_column($this->table, 'referrer', ['text']);
        $this->add_column($this->table, 'length', ['integer', 'default' => 0]);

        $this->remove_column($this->table, 'image');
        $this->remove_column($this->table, 'os');
        $this->remove_column($this->table, 'os_ver');
        $this->remove_column($this->table, 'group');
    }
}