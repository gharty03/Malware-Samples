<tr>
	<td>
		<?=$test->id?>
	</td>
	<td style="padding: 0">
		<table class="table table-condensed" style="margin-bottom: 0">
			<thead>
			<tr class="panel-heading btn-link" data-toggle="collapse" data-target="#filter<?=$test->id?>">
				<td class="col-md-1">
					Link
				</td>
				<td class="wrap-word">
					<?php
					$host = $test->logpost->where('name', '=', 'Host')->find();
					$post = $test->logpost->where('name', '=', 'POST')->find();
					echo $host->data.$post->data;
					?>
				</td>
			</tr>
			</thead>
			<tbody id="filter<?=$test->id?>" class="panel-collapse collapse">
			<?$logpost = $test->logpost->find_all();?>
			<?foreach($logpost as $key => $post){
				if($post->name != 'POST' && $post->name != 'Host'){
					if($post->name == 'Unknown'){
						$type = $test->logpost
							->where('name', '=', 'Content-Type')
							->find();
						if(preg_match('#urlencoded#', $type->data)){ ?>
							<tr>
								<td>Content</td>
								<td class="wrap-word" style="overflow-y: scroll;max-height: 100px"><?=htmlspecialchars($post->data)?></td>
							</tr>
						<?} elseif(preg_match('#json#', $type->data)){ ?>
							<tr>
								<td>Content</td>
								<td>
									<table class="table" style="overflow-y: scroll;max-height: 100px">
										<? $tmpMy = json_decode($post->data); ?>
										<? if(!empty($tmpMy)){ ?>
											<? foreach(json_decode($post->data) as $jk => $js){ ?>
												<? if(is_object($js) || is_array($js)){ ?>
													<? foreach($js as $jk2 => $js2){ ?>
														<? if(is_object($js2)){ ?>
															<? foreach($js2 as $jk3 => $js3){ ?>
																<tr>
																	<td><?=htmlspecialchars($jk3)?></td>
																	<? try{
																		echo "<td class='wrap-word'>".htmlspecialchars($js3)."</td>";
																	}catch(Exception $e){
//														echo Debug::vars($js3, $jk3);
																	}?>
																	<!--													<td>--><?//=$js3?><!--</td>-->
																</tr>
															<? } ?>
														<? }else{ ?>
															<tr>
																<td><?=htmlspecialchars($jk2)?></td>
																<? try{
																	echo "<td class='wrap-word'>".htmlspecialchars($js2)."</td>";
																}catch(Exception $e){
//													echo Debug::vars($js2, $jk2);
																}?>
																<!--												<td>--><?//=$js2?><!--</td>-->
															</tr>
														<? } ?>
													<? } ?>
												<? }else{ ?>
													<tr>
														<td><?=htmlspecialchars($jk)?></td>
														<td class='wrap-word'><?=htmlspecialchars($js)?></td>
													</tr>
												<? } ?>
											<? }} ?>
									</table>
								</td>
							</tr>
						<?} elseif(preg_match('#xml#', $type->data)){ ?>
							<tr>
								<td>Content</td>
								<td class="wrap-word" style='overflow-y: scroll;max-height: 100px'><?=htmlspecialchars($post->data)?></td>
							</tr>
						<? } ?>
					<? }elseif(PHP_SAPI == 'cli'){?>
						<? if($post->name == 'Referer'){?>
							<tr>
								<td class="col-md-1">
									<?=$post->name?>
								</td>
								<td class="wrap-word" style='overflow-y: scroll;max-height: 100px'>
									<?=htmlspecialchars($post->data)?>
								</td>
							</tr>
						<? }
					}else{?>
						<tr>
							<td class="col-md-1">
								<?=$post->name?>
							</td>
							<td class="wrap-word" style='overflow-y: scroll;max-height: 100px'>
								<?=htmlspecialchars($post->data)?>
							</td>
						</tr>
					<? }}} ?>
			<tr>
				<td>
					Client
				</td>
				<td>
					<nobr><?=$test->client?></nobr>
				</td>
			</tr>
			<tr>
				<td>
					Logkeys
				</td>
				<td>
					<nobr><?=$test->logkeys?></nobr>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<a href="/logpost/more/<?=$test->id?>" class="btn btn-primary pull-left" target="_blank">
						<span class="glyphicon glyphicon-new-window"></span>
					</a>
				</td>
			</tr>
			</tbody>
		</table>
	</td>
</tr>