<?php

namespace backend\controllers;

use Yii;
use yii\web\Controller;
use yii\web\NotFoundHttpException;

use yii\helpers\Url;

class DownloadfileController extends Controller
{
    
    public function actionIndex()
    {
        if (Yii::$app->user->isGuest) {
            return $this->goHome();
        }
        $request = Yii::$app->request->queryParams;
        $url = Yii::getAlias('@absPath').'/'.$request['bot'].'/'.$request['dir'].'/'.$request['file'];
        if(file_exists($url)){
            Yii::$app->response->sendFile($url);
        }else{
            throw new \yii\web\NotFoundHttpException();
        }
        
    }

}
